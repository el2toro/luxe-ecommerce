<div class="overlay" (click)="close()"></div>

    <aside class="drawer">
      <div class="header">
        <h2>Your Cart ({{(totalItems$ | async)!}})</h2>
        <button (click)="close()"><mat-icon>close</mat-icon></button>
      </div>

      <div class="items">
        <div class="item" *ngFor="let item of items$ | async">
          <img [src]="item.image" [alt]="item.name">
          <div class="info">
            <p class="brand">{{item.brand}}</p>
            <h4>{{item.name}}</h4>
            <p class="details">Size {{item.size}} â€¢ {{item.color}}</p>
            <p class="price">${{item.price * item.quantity}}</p>
          </div>

          <div class="actions">
            <button (click)="cart.updateQuantity({id: item.id, quantity: item.quantity - 1})">-</button>
            <span>{{item.quantity}}</span>
            <button (click)="cart.updateQuantity({id: item.id, quantity: item.quantity + 1})">+</button>
            <button class="remove" (click)="cart.removeItem(item.id)">
              <mat-icon>delete_outline</mat-icon>
            </button>
          </div>
        </div>
      </div>

      <div class="promo">
        <input type="text" placeholder="Promo code" [(ngModel)]="code">
        <button (click)="apply()">Apply</button>
      </div>

      <div class="summary">
        <div class="row">
          <span>Subtotal</span>
          <span>${{(subtotal$ | async) | currency:'USD':'symbol':'1.0'}}</span>
        </div>
        <div class="row discount" *ngIf="((discount$ | async) ?? 0) > 0">
          <span>Discount (25%)</span>
          <span>-${{((subtotal$ | async)! * (discount$ | async)!) | currency:'USD':'symbol':'1.0'}}</span>
        </div>
        <div class="row total">
          <strong>Total</strong>
          <strong>${{(total$ | async) | currency:'USD':'symbol':'1.0'}}</strong>
        </div>
      </div>

      <button class="checkout">Proceed to Checkout</button>
      <button class="continue">Continue Shopping</button>
    </aside>